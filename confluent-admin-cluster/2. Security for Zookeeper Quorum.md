# Security for Zookeeper Quorum

## Setup Zookeeper Quorum

Navigasi ke `/etc/kafka/zookeeper.properties` dan konfigurasi file menjadi berikut:

```
tickTime=2000
dataDir=/var/lib/zookeeper
clientPort=2181
initLimit=5
syncLimit=2

server.1=10.100.13.168:2888:3888
server.2=10.100.13.169:2888:3888
server.3=10.100.13.171:2888:3888

autopurge.snapRetainCount=3
autopurge.purgeInterval=24
```

- `tickTime` : Satuan waktu dasar dalam milidetik yang digunakan oleh Zookeeper. Ini digunakan untuk detak jantung antara server Zookeeper dan antara klien dan server. Di sini, 2000 milidetik (atau 2 detik) adalah interval waktunya.
- `dataDir` : Direktori tempat Zookeeper akan menyimpan datanya, termasuk snapshot dari database dalam memori dan file log transaksi. Pastikan direktori ini ada dan Zookeeper memiliki permission write.
- `clientPort` : Port tempat server Zookeeper akan mendengarkan koneksi klien.
- `initLimit` : Jumlah waktu, dalam tick (tickTime), yang dapat digunakan oleh follower untuk terhubung dan melakukan sinkronisasi dengan leader. Jika follower memerlukan lebih dari 5 tick (10 detik, jika diberi tickTime=2000) untuk melakukan inisialisasi, maka dianggap gagal.
- `syncLimit` : Jumlah waktu, dalam tick (tickTime), dimana seorang follower dapat tertinggal dari leader sebelum dianggap tidak sinkron dan dikeluarkan dari ansambel. Di sini, 2 tick (4 detik) adalah jeda maksimum yang diperbolehkan.
- `autopurge.snapRetainCount` : Jumlah file snapshot yang akan disimpan Zookeeper selama pembersihan otomatis. Snapshot lama akan dihapus untuk mengosongkan ruang. Di sini, 3 file snapshot akan disimpan.
- `autopurge.purgeInterval` : Interval waktu dalam jam untuk pembersihan otomatis snapshot dan file log lama. Dengan nilai 24 maka proses purging akan berjalan setiap 24 jam sekali.

Di direktori `/var/lib/zookeeper/`, buat file bernama `myid`. File ini terdiri dari satu baris yang berisi ID mesin dalam format <machine-id>. Saat server ZooKeeper dijalankan, ia mengetahui server mana dengan mereferensikan file myid. Misalnya server 1 akan memiliki nilai myid `1`. Setelah itu, start confluent-zookeeper di setiap server.

![image](https://github.com/user-attachments/assets/c1a02038-ba8b-44c0-8d8a-7232e261c531)

Karena ketiga zookeeper sudah berjalan, untuk melihat 
